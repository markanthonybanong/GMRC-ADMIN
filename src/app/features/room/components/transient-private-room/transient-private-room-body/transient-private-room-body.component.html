<div *ngIf="state$ | async as subs">
  <div class="request-status">
    <mat-spinner class="in-progress-request"  *ngIf="subs.requests.rooms.inProgress"></mat-spinner>
    <h1 class="error error-request" *ngIf="subs.requests.rooms.error">{{request.Error}}</h1>
  </div>
  <table mat-table [dataSource]="subs.table.dataSource" *ngIf="subs.requests.rooms.success">
    <ng-container matColumnDef="roomNumber">
      <th mat-header-cell *matHeaderCellDef>Room number</th>
      <td mat-cell *matCellDef="let element">{{element.number}}</td>
    </ng-container>
    <ng-container matColumnDef="floorNumber">
      <th mat-header-cell *matHeaderCellDef >Floor number</th>
      <td mat-cell *matCellDef="let element">{{element.floor}}</td>
    </ng-container>
    <ng-container matColumnDef="roomType">
      <th mat-header-cell *matHeaderCellDef>Room type</th>
      <td mat-cell *matCellDef="let element">{{element.type}}</td>
    </ng-container>
    <ng-container matColumnDef="aircon">
      <th mat-header-cell *matHeaderCellDef>Aircon</th>
      <td mat-cell *matCellDef="let element">{{element.aircon}}</td>
    </ng-container>
    <ng-container matColumnDef="roomStatus">
      <th mat-header-cell *matHeaderCellDef>Room status</th>
      <td mat-cell *matCellDef="let element">{{element.roomProperties[0].status}}</td>
    </ng-container>
    <ng-container matColumnDef="dueRentDate">
      <th mat-header-cell *matHeaderCellDef>Due rent date</th>
      <td mat-cell *matCellDef="let element">{{element.roomProperties[0].dueRentDate}}</td>
    </ng-container>
    <ng-container matColumnDef="tenant">
      <th mat-header-cell *matHeaderCellDef>Tenant/s</th>
      <td mat-cell *matCellDef="let element">
         <p *ngFor="let tenant of element.roomProperties[0].tenants">
           {{tenant.firstname+' '+tenant.middlename+' '+tenant.lastname}}
         </p>
      </td>
    </ng-container>
    <ng-container matColumnDef="actions">
      <th mat-header-cell *matHeaderCellDef>Actions</th>
      <td mat-cell *matCellDef="let element">
        <mat-icon id="label-text-primary" (click)="updateRoom(element._id)">edit</mat-icon>
      </td>
    </ng-container>
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>
</div>

